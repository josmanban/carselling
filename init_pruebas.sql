--
-- PostgreSQL database dump
--

-- Dumped from database version 12.22 (Ubuntu 12.22-0ubuntu0.20.04.4)
-- Dumped by pg_dump version 12.22 (Ubuntu 12.22-0ubuntu0.20.04.4)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: empleados; Type: TABLE; Schema: public; Owner: appuser
--

CREATE TABLE public.empleados (
    legajo integer NOT NULL,
    apellido character varying(255),
    nombre character varying(255),
    telefono_contacto character varying(255)
);


ALTER TABLE public.empleados OWNER TO appuser;

--
-- Name: empleados_legajo_seq; Type: SEQUENCE; Schema: public; Owner: appuser
--

ALTER TABLE public.empleados ALTER COLUMN legajo ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.empleados_legajo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: incidencias; Type: TABLE; Schema: public; Owner: appuser
--

CREATE TABLE public.incidencias (
    id bigint NOT NULL,
    mensaje double precision NOT NULL,
    es_zona_restringida boolean NOT NULL,
    id_prueba integer NOT NULL,
    id_posicion integer NOT NULL,
    fecha_hora timestamp(6) without time zone
);


ALTER TABLE public.incidencias OWNER TO appuser;

--
-- Name: incidencias_id_seq; Type: SEQUENCE; Schema: public; Owner: appuser
--

ALTER TABLE public.incidencias ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.incidencias_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: interesados; Type: TABLE; Schema: public; Owner: appuser
--

CREATE TABLE public.interesados (
    id integer NOT NULL,
    apellido character varying(255),
    documento character varying(255),
    fecha_vencimiento_licencia date,
    nombre character varying(255),
    nro_licencia character varying(255),
    restringido boolean,
    telefono_contacto character varying(255),
    tipo_documento character varying(255)
);


ALTER TABLE public.interesados OWNER TO appuser;

--
-- Name: interesados_id_seq; Type: SEQUENCE; Schema: public; Owner: appuser
--

ALTER TABLE public.interesados ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.interesados_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: marcas; Type: TABLE; Schema: public; Owner: appuser
--

CREATE TABLE public.marcas (
    id integer NOT NULL,
    nombre character varying(255) NOT NULL
);


ALTER TABLE public.marcas OWNER TO appuser;

--
-- Name: marcas_id_seq; Type: SEQUENCE; Schema: public; Owner: appuser
--

ALTER TABLE public.marcas ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.marcas_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: modelos; Type: TABLE; Schema: public; Owner: appuser
--

CREATE TABLE public.modelos (
    id integer NOT NULL,
    descripcion character varying(255) NOT NULL,
    id_marca integer NOT NULL
);


ALTER TABLE public.modelos OWNER TO appuser;

--
-- Name: modelos_id_seq; Type: SEQUENCE; Schema: public; Owner: appuser
--

ALTER TABLE public.modelos ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.modelos_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: my_model; Type: TABLE; Schema: public; Owner: appuser
--

CREATE TABLE public.my_model (
    id bigint NOT NULL,
    name character varying(255)
);


ALTER TABLE public.my_model OWNER TO appuser;

--
-- Name: my_model_id_seq; Type: SEQUENCE; Schema: public; Owner: appuser
--

ALTER TABLE public.my_model ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.my_model_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: posiciones; Type: TABLE; Schema: public; Owner: appuser
--

CREATE TABLE public.posiciones (
    id integer NOT NULL,
    fecha_hora timestamp(6) without time zone,
    latitud double precision NOT NULL,
    longitud double precision NOT NULL,
    id_vehiculo integer NOT NULL
);


ALTER TABLE public.posiciones OWNER TO appuser;

--
-- Name: posiciones_id_seq; Type: SEQUENCE; Schema: public; Owner: appuser
--

ALTER TABLE public.posiciones ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.posiciones_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: pruebas; Type: TABLE; Schema: public; Owner: appuser
--

CREATE TABLE public.pruebas (
    id integer NOT NULL,
    comentarios character varying(500),
    fecha_hora_fin timestamp(6) without time zone,
    fecha_hora_inicio timestamp(6) without time zone,
    id_empleado integer NOT NULL,
    id_interesado integer NOT NULL,
    id_vehiculo integer NOT NULL
);


ALTER TABLE public.pruebas OWNER TO appuser;

--
-- Name: pruebas_id_seq; Type: SEQUENCE; Schema: public; Owner: appuser
--

ALTER TABLE public.pruebas ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.pruebas_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: vehiculos; Type: TABLE; Schema: public; Owner: appuser
--

CREATE TABLE public.vehiculos (
    id integer NOT NULL,
    patente character varying(255) NOT NULL,
    id_modelo integer NOT NULL
);


ALTER TABLE public.vehiculos OWNER TO appuser;

--
-- Name: vehiculos_id_seq; Type: SEQUENCE; Schema: public; Owner: appuser
--

ALTER TABLE public.vehiculos ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.vehiculos_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Data for Name: empleados; Type: TABLE DATA; Schema: public; Owner: appuser
--

COPY public.empleados (legajo, apellido, nombre, telefono_contacto) FROM stdin;
\.


--
-- Data for Name: incidencias; Type: TABLE DATA; Schema: public; Owner: appuser
--

COPY public.incidencias (id, mensaje, es_zona_restringida, id_prueba, id_posicion, fecha_hora) FROM stdin;
\.


--
-- Data for Name: interesados; Type: TABLE DATA; Schema: public; Owner: appuser
--

COPY public.interesados (id, apellido, documento, fecha_vencimiento_licencia, nombre, nro_licencia, restringido, telefono_contacto, tipo_documento) FROM stdin;
\.


--
-- Data for Name: marcas; Type: TABLE DATA; Schema: public; Owner: appuser
--

COPY public.marcas (id, nombre) FROM stdin;
\.


--
-- Data for Name: modelos; Type: TABLE DATA; Schema: public; Owner: appuser
--

COPY public.modelos (id, descripcion, id_marca) FROM stdin;
\.


--
-- Data for Name: my_model; Type: TABLE DATA; Schema: public; Owner: appuser
--

COPY public.my_model (id, name) FROM stdin;
\.


--
-- Data for Name: posiciones; Type: TABLE DATA; Schema: public; Owner: appuser
--

COPY public.posiciones (id, fecha_hora, latitud, longitud, id_vehiculo) FROM stdin;
\.


--
-- Data for Name: pruebas; Type: TABLE DATA; Schema: public; Owner: appuser
--

COPY public.pruebas (id, comentarios, fecha_hora_fin, fecha_hora_inicio, id_empleado, id_interesado, id_vehiculo) FROM stdin;
\.


--
-- Data for Name: vehiculos; Type: TABLE DATA; Schema: public; Owner: appuser
--

COPY public.vehiculos (id, patente, id_modelo) FROM stdin;
\.


--
-- Name: empleados_legajo_seq; Type: SEQUENCE SET; Schema: public; Owner: appuser
--

SELECT pg_catalog.setval('public.empleados_legajo_seq', 1, false);


--
-- Name: incidencias_id_seq; Type: SEQUENCE SET; Schema: public; Owner: appuser
--

SELECT pg_catalog.setval('public.incidencias_id_seq', 1, false);


--
-- Name: interesados_id_seq; Type: SEQUENCE SET; Schema: public; Owner: appuser
--

SELECT pg_catalog.setval('public.interesados_id_seq', 1, false);


--
-- Name: marcas_id_seq; Type: SEQUENCE SET; Schema: public; Owner: appuser
--

SELECT pg_catalog.setval('public.marcas_id_seq', 1, false);


--
-- Name: modelos_id_seq; Type: SEQUENCE SET; Schema: public; Owner: appuser
--

SELECT pg_catalog.setval('public.modelos_id_seq', 1, false);


--
-- Name: my_model_id_seq; Type: SEQUENCE SET; Schema: public; Owner: appuser
--

SELECT pg_catalog.setval('public.my_model_id_seq', 1, false);


--
-- Name: posiciones_id_seq; Type: SEQUENCE SET; Schema: public; Owner: appuser
--

SELECT pg_catalog.setval('public.posiciones_id_seq', 1, false);


--
-- Name: pruebas_id_seq; Type: SEQUENCE SET; Schema: public; Owner: appuser
--

SELECT pg_catalog.setval('public.pruebas_id_seq', 1, false);


--
-- Name: vehiculos_id_seq; Type: SEQUENCE SET; Schema: public; Owner: appuser
--

SELECT pg_catalog.setval('public.vehiculos_id_seq', 1, false);


--
-- Name: empleados empleados_pkey; Type: CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.empleados
    ADD CONSTRAINT empleados_pkey PRIMARY KEY (legajo);


--
-- Name: incidencias incidencias_pkey; Type: CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.incidencias
    ADD CONSTRAINT incidencias_pkey PRIMARY KEY (id);


--
-- Name: interesados interesados_pkey; Type: CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.interesados
    ADD CONSTRAINT interesados_pkey PRIMARY KEY (id);


--
-- Name: marcas marcas_pkey; Type: CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.marcas
    ADD CONSTRAINT marcas_pkey PRIMARY KEY (id);


--
-- Name: modelos modelos_pkey; Type: CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.modelos
    ADD CONSTRAINT modelos_pkey PRIMARY KEY (id);


--
-- Name: my_model my_model_pkey; Type: CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.my_model
    ADD CONSTRAINT my_model_pkey PRIMARY KEY (id);


--
-- Name: posiciones posiciones_pkey; Type: CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.posiciones
    ADD CONSTRAINT posiciones_pkey PRIMARY KEY (id);


--
-- Name: pruebas pruebas_pkey; Type: CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.pruebas
    ADD CONSTRAINT pruebas_pkey PRIMARY KEY (id);


--
-- Name: marcas ukf9j5vnky0egidx9qqqa4gbf85; Type: CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.marcas
    ADD CONSTRAINT ukf9j5vnky0egidx9qqqa4gbf85 UNIQUE (nombre);


--
-- Name: vehiculos ukkxt53tfqxxydvqll7ldil6qu7; Type: CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.vehiculos
    ADD CONSTRAINT ukkxt53tfqxxydvqll7ldil6qu7 UNIQUE (patente);


--
-- Name: vehiculos vehiculos_pkey; Type: CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.vehiculos
    ADD CONSTRAINT vehiculos_pkey PRIMARY KEY (id);


--
-- Name: pruebas fk4hvn9kkh1tjv3aus0kqy7tred; Type: FK CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.pruebas
    ADD CONSTRAINT fk4hvn9kkh1tjv3aus0kqy7tred FOREIGN KEY (id_vehiculo) REFERENCES public.vehiculos(id);


--
-- Name: posiciones fke6mtcm9r53at0cqc07chlcd4y; Type: FK CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.posiciones
    ADD CONSTRAINT fke6mtcm9r53at0cqc07chlcd4y FOREIGN KEY (id_vehiculo) REFERENCES public.vehiculos(id);


--
-- Name: pruebas fkg03nbt5wvgd8gkwkxyal6sfy; Type: FK CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.pruebas
    ADD CONSTRAINT fkg03nbt5wvgd8gkwkxyal6sfy FOREIGN KEY (id_empleado) REFERENCES public.empleados(legajo);


--
-- Name: incidencias fkm81aav4le23pma5t8a8b3e4dj; Type: FK CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.incidencias
    ADD CONSTRAINT fkm81aav4le23pma5t8a8b3e4dj FOREIGN KEY (id_prueba) REFERENCES public.pruebas(id);

--
-- Name: incidencias fkm81aav4le23pma5t8a8b3e4za; Type: FK CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.incidencias
    ADD CONSTRAINT fkm81aav4le23pma5t8a8b3e4za FOREIGN KEY (id_posicion) REFERENCES public.posiciones(id);


--
-- Name: pruebas fkmh48tjyfki4eq6jr3imxcsxy4; Type: FK CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.pruebas
    ADD CONSTRAINT fkmh48tjyfki4eq6jr3imxcsxy4 FOREIGN KEY (id_interesado) REFERENCES public.interesados(id);


--
-- Name: vehiculos fkndj9lplbx8rtf5cvbnxnuk51u; Type: FK CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.vehiculos
    ADD CONSTRAINT fkndj9lplbx8rtf5cvbnxnuk51u FOREIGN KEY (id_modelo) REFERENCES public.modelos(id);


--
-- Name: modelos fkrvg5jqisfih1e9qe6478o0vr1; Type: FK CONSTRAINT; Schema: public; Owner: appuser
--

ALTER TABLE ONLY public.modelos
    ADD CONSTRAINT fkrvg5jqisfih1e9qe6478o0vr1 FOREIGN KEY (id_marca) REFERENCES public.marcas(id);

-- DATA

-- Marcas (ids set to match tests)
INSERT INTO public.marcas (id, nombre) VALUES (1, 'Ford');
INSERT INTO public.marcas (id, nombre) VALUES (2, 'Chevrolet');

-- Modelos
INSERT INTO public.modelos (id, id_marca, descripcion) VALUES (1, 1, 'Focus');
INSERT INTO public.modelos (id, id_marca, descripcion) VALUES (2, 2, 'Fiesta');

-- Vehiculos
INSERT INTO public.vehiculos (id, patente, id_modelo) VALUES (1, 'ABC123', 1);
INSERT INTO public.vehiculos (id, patente, id_modelo) VALUES (2, 'DEF456', 2);
INSERT INTO public.vehiculos (id, patente, id_modelo) VALUES (3, 'GHI789', 1);

-- Empleados (legajo is the PK)
INSERT INTO public.empleados (legajo, nombre, apellido, telefono_contacto) VALUES (1, 'Juan', 'Pérez', '123456789');
INSERT INTO public.empleados (legajo, nombre, apellido, telefono_contacto) VALUES (2, 'María', 'Gómez', '987654321');

-- Interesados
INSERT INTO public.interesados (id, tipo_documento, documento, nombre, apellido, nro_licencia, telefono_contacto, fecha_vencimiento_licencia, restringido) 
VALUES (1, 'DNI', '12345678', 'Carlos', 'Sánchez', 'A1234567', '987654321', DATE '2025-12-31', FALSE);

INSERT INTO public.interesados (id, tipo_documento, documento, nombre, apellido, nro_licencia, telefono_contacto, fecha_vencimiento_licencia, restringido) 
VALUES (2, 'DNI', '87654321', 'Lucía', 'Fernández', 'B7654321', '987654322', DATE '2024-11-30', FALSE);

INSERT INTO public.interesados (id, tipo_documento, documento, nombre, apellido, nro_licencia, telefono_contacto, fecha_vencimiento_licencia, restringido) 
VALUES (3, 'DNI', '11223344', 'Marcos', 'Ramírez', 'C1122334', '987654323', DATE '2023-10-15', FALSE);

INSERT INTO public.interesados (id, tipo_documento, documento, nombre, apellido, nro_licencia, telefono_contacto, fecha_vencimiento_licencia, restringido) 
VALUES (4, 'DNI', '44332211', 'Ana', 'Ríos', 'D4433221', '987654324', DATE '2023-09-30', TRUE);

-- Pruebas
INSERT INTO public.pruebas (id, id_vehiculo, id_interesado, id_empleado, fecha_hora_inicio) 
VALUES (1, 1, 1, 1, TIMESTAMP '2023-10-01 10:00:00');

INSERT INTO public.pruebas (id, id_vehiculo, id_interesado, id_empleado, fecha_hora_inicio) 
VALUES (2, 2, 2, 1, TIMESTAMP '2023-10-02 11:30:00');

INSERT INTO public.pruebas (id, id_vehiculo, id_interesado, id_empleado, fecha_hora_inicio, fecha_hora_fin, comentarios) 
VALUES (3, 3, 3, 2, TIMESTAMP '2023-09-20 10:00:00', TIMESTAMP '2023-09-20 11:00:00', 'Prueba finalizada');

-- Posiciones (for vehiculo id = 3)
INSERT INTO public.posiciones (id, id_vehiculo, fecha_hora, latitud, longitud) VALUES (1, 3, TIMESTAMP '2023-09-20 10:20:00', -34.6037, -58.3816);
INSERT INTO public.posiciones (id, id_vehiculo, fecha_hora, latitud, longitud) VALUES (2, 3, TIMESTAMP '2023-09-20 10:40:00', -34.6040, -58.3820);
INSERT INTO public.posiciones (id, id_vehiculo, fecha_hora, latitud, longitud) VALUES (3, 3, TIMESTAMP '2023-09-20 11:00:00', -34.6045, -58.3825);

-- Optional: reset identity/sequence next values if your DB requires it (H2 example)
ALTER TABLE public.marcas ALTER COLUMN id RESTART WITH 3;
ALTER TABLE public.modelos ALTER COLUMN id RESTART WITH 3;
ALTER TABLE public.vehiculos ALTER COLUMN id RESTART WITH 4;
ALTER TABLE public.empleados ALTER COLUMN legajo RESTART WITH 3;
ALTER TABLE public.interesados ALTER COLUMN id RESTART WITH 5;
ALTER TABLE public.pruebas ALTER COLUMN id RESTART WITH 4;
ALTER TABLE public.posiciones ALTER COLUMN id RESTART WITH 4;


--
-- PostgreSQL database dump complete
--

